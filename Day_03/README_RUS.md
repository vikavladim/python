# Содержание

- [Упражнение 00: Получение доступа](#упражнение-00-получение-доступа)
- [Упражнение 01: Денежные потоки](#упражнение-01-денежные-потоки)
- [Задание 02: Развертывание](#задание-02-развертывание)

# Упражнение 00: Невинная шалость

1. Прочитать файл "evilcorp.html"
2. Изменить заголовок страницы на "Evil Corp - Stealing your money every day"
3. Разобрать имя пользователя со страницы и ввести новый тег `<h1>` в `<body>` страницы, сказав
   `<h1>Mr. Robot, you are hacked!</h1>`
4. Внедрить скрипт Трентона в `<body>` страницы. При нажатии кнопки "Отправить" в окне предупреждения должно появиться
   слово "взломан":

```html

<script>
    hacked = function () {
        alert('hacked');
    }
    window.addEventListener('load',
            function () {
                var f = document.querySelector("form");
                f.setAttribute("onsubmit", "hacked()");
            },
            false
    );
</script>
```

5. Изменить ссылку внизу страницы на "https://mrrobot.fandom.com/wiki/Fsociety" и заменить название компании на "
   Fsociety".

Новый HTML-файл должен быть назван "evilcorp_hacked.html" и помещен в тот же каталог, что и исходный "evilcorp.html"
файл.

### Упражнение 01: Денежные потоки

Вам необходимо написать два скрипта - `producer.py` и `consumer.py`.

Производитель должен генерировать JSON-сообщения вида:

```json
{
  "metadata": {
    "from": 1023461745,
    "to": 5738456434
  },
  "amount": 10000
}
```

и помещать их как полезную нагрузку в очередь Redis pubsub.

Потребитель должен получать аргумент со списком номеров счетов в таком формате:

`~$ python consumer.py -e 7134456234,3476371234`

где `-e` - это параметр, принимающий список номеров счетов "плохих парней". При запуске он должен читать сообщения из
очереди pubsub и выводить их в стандартный вывод по одному на строку. Для счетов из списка "плохих парней", если они
указаны в качестве получателя, потребитель должен *поменять* отправителя и получателя для транзакции. Но это должно
произойти *только* в случае, если "amount" не отрицательное число.

Например, если производитель создает три сообщения вот такого вида:

```json
{
  "metadata": {
    "from": 1111111111,
    "to": 2222222222
  },
  "amount": 10000
}
{
  "metadata": {
    "from": 3333333333,
    "to": 4444444444
  },
  "amount": -3000
}
{
  "metadata": {
    "from": 2222222222,
    "to": 5555555555
  },
  "amount": 5000
}
```

потребитель, запущенный как `~$ python consumer.py -e 2222222222,4444444444`, должен вывести:

```json
{
  "metadata": {
    "from": 2222222222,
    "to": 1111111111
  },
  "amount": 10000
}
{
  "metadata": {
    "from": 3333333333,
    "to": 4444444444
  },
  "amount": -3000
}
{
  "metadata": {
    "from": 2222222222,
    "to": 5555555555
  },
  "amount": 5000
}
```

Обратите внимание, что изменена только первая строка. Вторая не изменилась, потому что "amount" был отрицательным (даже
если получатель - плохой парень). Третья не была изменена, потому что плохой парень является отправителем, а не
получателем.

### Задание 02: Развертывание

- Напишите скрипт развертывания "gen_ansible.py", который конвертирует "todo.yml" в "deploy.yml".
- Сгенерируйте задачи в формате Ansible для:
    - Установки пакетов
    - Копирования файлов
    - Запуска файлов на удаленном сервере с использованием интерпретатора Python и указанием соответствующих аргументов.

В "deploy.yml" должны быть отражены эти задачи в нотации Ansible.
